<!DOCTYPE html>
<html lang="zh">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  [毕业设计]Day3 · Zyed
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Zyed">
<meta name="description" content="
  完成 $\text{sampling bias}$ 验证
  
    
    链接到标题
  

在 $Cora$ ，$PubMed$ ，$CiteSeer$ ，$WikiCS$ 四个数据集上验证采样偏差并绘制图像


  定义 $\text{GCL}$ 为 $\text{P-U learning}$ 问题
  
    
    链接到标题
  

由 $\text{sampling bias validation}$ 实验结果可知，传统 $\text{GCL}$ 存在以下问题：
正样本集 $D^&#43;$ 只包含由同一原始结点增强而来的节点对 $\{(u_i,v_i),(v_i,u_i)\}^N_{i = 1}$ ，也就是 $D^{aug&#43;}$ ，负样本集 $D^-$ 包含所有不在正样本集 $D^&#43;$ 中的节点对 $\{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}$  ，也就是 $D^{aug-}$ ，即

$$
D^&#43; = D^{aug&#43;} = \{(u_i,v_i),(v_i,u_i)\}^N_{i = 1} \\
D^- = D^{aug-} = \{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}
$$
注意，图对比学习中的正样本集 $D^&#43;$ 应为增强视图中所有语义相近的结点对，负样本集 $D^-$ 应为所有语义差异大的结点对，而经过采样偏差验证实验，我们发现在 $D^-$ 中出现了大量语义相近的结点对，正是这些被错误划分的结点对限制了 $\text{GCL}$ 的效果">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="[毕业设计]Day3">
  <meta name="twitter:description" content="完成 $\text{sampling bias}$ 验证 链接到标题 在 $Cora$ ，$PubMed$ ，$CiteSeer$ ，$WikiCS$ 四个数据集上验证采样偏差并绘制图像
定义 $\text{GCL}$ 为 $\text{P-U learning}$ 问题 链接到标题 由 $\text{sampling bias validation}$ 实验结果可知，传统 $\text{GCL}$ 存在以下问题：
正样本集 $D^&#43;$ 只包含由同一原始结点增强而来的节点对 $\{(u_i,v_i),(v_i,u_i)\}^N_{i = 1}$ ，也就是 $D^{aug&#43;}$ ，负样本集 $D^-$ 包含所有不在正样本集 $D^&#43;$ 中的节点对 $\{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}$ ，也就是 $D^{aug-}$ ，即 $$D^&#43; = D^{aug&#43;} = \{(u_i,v_i),(v_i,u_i)\}^N_{i = 1} \\D^- = D^{aug-} = \{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}$$ 注意，图对比学习中的正样本集 $D^&#43;$ 应为增强视图中所有语义相近的结点对，负样本集 $D^-$ 应为所有语义差异大的结点对，而经过采样偏差验证实验，我们发现在 $D^-$ 中出现了大量语义相近的结点对，正是这些被错误划分的结点对限制了 $\text{GCL}$ 的效果">

<meta property="og:url" content="http://localhost:1313/posts/dissertation-day3/">
  <meta property="og:site_name" content="Zyed">
  <meta property="og:title" content="[毕业设计]Day3">
  <meta property="og:description" content="完成 $\text{sampling bias}$ 验证 链接到标题 在 $Cora$ ，$PubMed$ ，$CiteSeer$ ，$WikiCS$ 四个数据集上验证采样偏差并绘制图像
定义 $\text{GCL}$ 为 $\text{P-U learning}$ 问题 链接到标题 由 $\text{sampling bias validation}$ 实验结果可知，传统 $\text{GCL}$ 存在以下问题：
正样本集 $D^&#43;$ 只包含由同一原始结点增强而来的节点对 $\{(u_i,v_i),(v_i,u_i)\}^N_{i = 1}$ ，也就是 $D^{aug&#43;}$ ，负样本集 $D^-$ 包含所有不在正样本集 $D^&#43;$ 中的节点对 $\{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}$ ，也就是 $D^{aug-}$ ，即 $$D^&#43; = D^{aug&#43;} = \{(u_i,v_i),(v_i,u_i)\}^N_{i = 1} \\D^- = D^{aug-} = \{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}$$ 注意，图对比学习中的正样本集 $D^&#43;$ 应为增强视图中所有语义相近的结点对，负样本集 $D^-$ 应为所有语义差异大的结点对，而经过采样偏差验证实验，我们发现在 $D^-$ 中出现了大量语义相近的结点对，正是这些被错误划分的结点对限制了 $\text{GCL}$ 的效果">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2026-02-03T21:21:58+08:00">
    <meta property="article:modified_time" content="2026-02-03T21:21:58+08:00">




<link rel="canonical" href="http://localhost:1313/posts/dissertation-day3/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 
  
    
    <link rel="stylesheet" href="/css/custom.css" media="screen">
  





<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Zyed
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">博客</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">关于</a>
            </li>
          
        
        
          
          
          
            
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/en/">English</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/dissertation-day3/">
              [毕业设计]Day3
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2026-02-03T21:21:58&#43;08:00">
                二月 3, 2026
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              阅读时间：3 分钟
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <h2 id="完成--验证">
  完成 $\text{sampling bias}$ 验证
  <a class="heading-link" href="#%e5%ae%8c%e6%88%90--%e9%aa%8c%e8%af%81">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<p>在 $Cora$ ，$PubMed$ ，$CiteSeer$ ，$WikiCS$ 四个数据集上验证采样偏差并绘制图像</p>
<p><img src="/posts/dissertation-day3/sampling_bias_merged.png" alt="sampling_bias_merged"></p>
<h2 id="定义--为--问题">
  定义 $\text{GCL}$ 为 $\text{P-U learning}$ 问题
  <a class="heading-link" href="#%e5%ae%9a%e4%b9%89--%e4%b8%ba--%e9%97%ae%e9%a2%98">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<p>由 $\text{sampling bias validation}$ 实验结果可知，传统 $\text{GCL}$ 存在以下问题：</p>
<p>正样本集 $D^+$ 只包含由同一原始结点增强而来的节点对 $\{(u_i,v_i),(v_i,u_i)\}^N_{i = 1}$ ，也就是 $D^{aug+}$ ，负样本集 $D^-$ 包含所有不在正样本集 $D^+$ 中的节点对 $\{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}$  ，也就是 $D^{aug-}$ ，即
</p>
$$
D^+ = D^{aug+} = \{(u_i,v_i),(v_i,u_i)\}^N_{i = 1} \\
D^- = D^{aug-} = \{(u_i,v_j),(v_j,u_i)\}^{N}_{i \neq j,i,j = 1}
$$<p>
注意，图对比学习中的正样本集 $D^+$ 应为增强视图中所有语义相近的结点对，负样本集 $D^-$ 应为所有语义差异大的结点对，而经过采样偏差验证实验，我们发现在 $D^-$ 中出现了大量语义相近的结点对，正是这些被错误划分的结点对限制了 $\text{GCL}$ 的效果</p>
<p>为此，我们需要在传统 $\text{GCL}$ 的基础上重新划分正负样本集，采样偏差。正样本集 $D^+$ 包含所有实际语义相近的结点对，而 $D^{aug+}$ 中的结点对都是经过同一原始结点增强得到的，理所当然地拥有相近的语义，因此 $D^{aug+}$ 自然是 $D^+$ 的一个组成部分。除此之外，我们还需要挖掘出 $D^{aug-}$ 中拥有相近语义的结点对，将其加入到 $D^+$ ，因此
</p>
$$
D^+ = D^{aug+} + D^{aug-}中语义相近的结点对
$$<p>
而 $D^-$ 自然为
</p>
$$
D^- = D^{aug-} - D^{aug-}中语义相近的结点对
$$<p>
由以上分析可知，语义引导的图对比学习首先要实现从 $D^{aug-}$ 中找到语义接近的结点对，将其重新划分到 $D^+$ 中，而 $D^{aug+}$ 中的结点全部拥有相近的语义，我们可以认为：</p>
<ul>
<li>$D^{aug+}$ 中的结点对已经被正确标记，拥有相近语义</li>
<li>$D^{aug-}$ 中的结点对还没有被标记，需要找出语义相近的结点对</li>
</ul>
<p>为了使表示简洁，我们定义两个变量：语义变量 $y = \{-1,+1\}$ ，其中 $y(x) = +1 \quad (x为结点对)$ 表示结点对 $x$ 具有相近的语义，应被划分到正样本集 $D^+$ (注意这是一个上帝视角的变量，在无监督学习的过程中是未知的)；标签状态 $o = \{-1,+1\}$ ，$o(x) = +1$ 表示结点对 $x$ 已经被打上标签</p>
<p>如果用 $D_L$ 表示所有已经被标记的结点对的集合，那么有 $D_L = D^{aug+}$ ， $D_L^+$  表示 $D_L$ 中实际语义相近的结点对的集合， $D_L^-$ 中实际语义差异大的结点对的集合，则有
</p>
$$
D_L^+ = \{x|y=1,o=1\} = D^{aug+} \\
D_L^- = \{x|y=-1,o=1\} = \varnothing
$$<p>
如果用 $D_U$ 表示所有没有被标记的结点对的集合，那么有 $D_U = D^{aug-}$ ，$D_U^+$  表示 $D_U$ 中实际语义相近的结点对的集合， $D_U^-$ 中实际语义差异大的结点对的集合，则有
</p>
$$
D_U^+ = \{x|y=1,o=-1\} \subseteq D^{aug-} \\
D_U^- = \{x|y=-1,o=-1\} \subseteq D^{aug-} \\
D_U^+ \cup D_U^- = D^{aug-}
$$<p>
那么语义引导的图对比学习的正负样本集为
</p>
$$
D^+ = D_L^+ + D_U^+ \\
D^- = D_U^- = D_U - D_U^+
$$<p>
至此，问题聚焦于：如何从 $D^{aug-}$ 找出实际语义相近的结点对并将其加入到 $D^+$ ?</p>
<h2 id="保序假设-">
  保序假设 ($\text{IOD}$)
  <a class="heading-link" href="#%e4%bf%9d%e5%ba%8f%e5%81%87%e8%ae%be-">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<p>提出了一个宽松而通用的保序假设 ($\text{Invariance of Order,IOD}$) 假设
</p>
$$
p(y=+1|x) \le p(y=+1|\hat{x}) \iff p(o=+1|x) \le p(o=+1|\hat{x})
$$<p>
即对于两个样本 $x$ , $\hat{x}$ ，如果 $\hat{x}$ 为正样本的概率更高，那么 $\hat{x}$ 被划分到 $D^{aug+}$ 的概率也更高，反之，如果 $\hat{x}$ 被划分到 $D^{aug+}$ 的概率更高，那么 $\hat{x}$ 为正样本的概率也更高</p>
<blockquote>
<p>注意，这里的样本 $x$ ，$\hat{x}$ 均为样本对，“正样本”即实际语义近似</p>
</blockquote>
<p>在以上假设下， $\text{Kato et al.}$ 提出以下推论
</p>
$$
p(y=+1|x) \le p(y=+1|\hat{x}) \iff r(x) \le r(\hat{x}) \\
其中，r(x) := \frac{p(x|y=+1, o=+1)}{p(x)}
$$<p>
$r(x)$ 为<strong>分布密度比</strong> ($\text{distribution density ratio}$) ，分子 $p(x|y=+1, o=+1)$ 是已知正样本（增强样本 $D^{aug+}$ ）的分布， $p(x)$ 是所有样本的分布。 $r(x)$ 反映了样本 $x$ 与 $D^{aug+}$ 中正样本的相似性， $r(x)$ 越大，说明样本 $x$ 与 $D^{aug+}$ 中的正样本越像，根据推论，该样本是正样本的概率也就越大</p>
<p>基于此推论，我们可以设计一个分类器 $h()$ ，它借助分布密度比 $r(x)$ 和 阈值 $t_r$ 实现在未标记样本 $D^{aug-}$ 中寻找正样本
</p>
$$
y(x) = h(x) := \text{sign}(r(x) - t_r)
$$<p>
即对于 $D_U = D^{aug-}$ 中的任意一个样本 $x$ ，如果 $r(x) > t_r$ ，说明它是隐藏的正样本，应划分到 $D^+$</p>
<p>至此，问题聚焦于：如何获取一个准确的 $r(x)$ ?</p>
<h2 id="证明免费午餐-">
  证明免费午餐 ($\text{Free-Lunch Provided by InfoNCE}$)
  <a class="heading-link" href="#%e8%af%81%e6%98%8e%e5%85%8d%e8%b4%b9%e5%8d%88%e9%a4%90-">
    <i class="fa-solid fa-link" aria-hidden="true" title="链接到标题"></i>
    <span class="sr-only">链接到标题</span>
  </a>
</h2>
<p><strong>目标</strong>：证明 $\text{InfoNCE}$ 损失函数
</p>
$$
\begin{aligned}
L &= \frac{1}{2N} \sum_{i=1}^N (l_{u_i, v_i} + l_{v_i, u_i}) \\
\text{其中}，l_{u_i, v_i} &= -\log \frac{s_{\theta}(u_i, v_i)}{\sum_{j \neq i, j=1}^N s_{\theta}(u_i, u_j) + \sum_{j=1}^N s_{\theta}(u_i, v_j)} \\ \\
s_{\theta}(u_i, v_j) &= \exp(\text{cos}(\mathbf{U}_i, \mathbf{V}_j) / \tau) 
\end{aligned}
$$<p>
中， $s_\theta(n,n^{\prime}) \propto r(x)$</p>
<p><strong>证明</strong>：</p>
<p>在论文 $\text{CPC, Oord et al. 2018}$ 中 $\text{InfoNCE}$ 被初次设计为建模以下密度比（处理序列数据）：
</p>
$$
f_k(x_{t+k}, c_t) \propto \frac{p(x_{t+k}|c_t)}{p(x_{t+k})}
$$<p>
$c_t$ 表示“当前的上下文”， $x_{t+k}$ 表示“未来的某个样本”，即 $\text{InfoNCE}$ 训练出的打分函数 $f_k$ ，其数值正比于 $x_{t+k}$ “<strong>在这个上下文下出现的概率</strong>（分子）”除以“<strong>随机出现的概率</strong>（分母）”</p>
<p>在 $\text{GCL}$ 中，没有“过去”“未来”等概念，只有两个互为增强视图的结点 $n$ 和 $n^{\prime}$ （或者表述为 $u_i$ 和 $v_i$），因此对上述公式中的变量做以下映射：</p>
<ul>
<li><strong>上下文 $c_t$</strong> $\rightarrow$ <strong>锚点节点 $n'$</strong> ($\text{Anchor Node}$)</li>
<li><strong>未来样本 $x_{t+k}$</strong> $\rightarrow$ <strong>正样本节点 $n$</strong> ($\text{Positive Node}$)</li>
<li><strong>打分函数 $f_k$</strong> $\rightarrow$ <strong>相似度函数 $s_\theta(n, n')$</strong></li>
<li><strong>概率分布 $p$</strong> $\rightarrow$ <strong>图上结点的概率密度 $q$</strong></li>
</ul>
<p>从而得到
</p>
$$
s_{\theta}(n, n') \propto \frac{q(n|n')}{q(n)}
$$<blockquote>
<p>为什么这样的映射是合理的？</p>
</blockquote>
<p>又根据条件概率公式
</p>
$$
P(A|B) = \frac{P(A, B)}{P(B)}
$$<p>
将分子展开，得到
</p>
$$
s_{\theta}(n,n^{\prime})\propto\frac{q(n|n^{\prime})}{q(n)}=\frac{q(n,n^{\prime})/q(n^{\prime})}{q(n)}=\frac{q(n,n^{\prime})}{q(n)q(n^{\prime})}
$$<p>
又因为
</p>
$$
p(x=(n,n^{\prime})|y=+1,o=+1)=q(n,n^{\prime}) \\
p(x=(n,n^{\prime}))=q(n)q(n^{\prime})
$$<blockquote>
<p>这两个等式为什么成立？</p>
</blockquote>
<p>从而得到
</p>
$$
s_{\theta}(n, n') \propto \frac{q(n, n')}{q(n)q(n')} = \frac{p(x|y = +1, o = +1)}{p(x)} = r(x)
$$<p>
接下来，公式
</p>
$$
p(y=+1|x) \le p(y=+1|\hat{x}) \iff r(x) \le r(\hat{x})
$$<p>
就可以继续推导成
</p>
$$
\begin{aligned}
&\forall \mathbf{x} = (n, n'), \mathbf{\hat{x}} = (\hat{n}, \hat{n}') \in D : \\
&p(y = +1|\mathbf{x}) \leq p(y = +1|\mathbf{\hat{x}}) \Leftrightarrow s_{\theta}(n, n') \leq s_{\theta}(\hat{n}, \hat{n}')
\end{aligned}
$$<p>
之前的分类器
</p>
$$
y(x) = h(x) := \text{sign}(r(x) - t_r)
$$<p>
也可以进一步改为
</p>
$$
y(\mathbf{x}) = h_s(\mathbf{x} = (n, n'); \theta) := \text{sign}(s_{\theta}(n, n') - t_s)
$$<p>
至此，我们找到了从未标记样本 $D_U = D^{aug-}$ 中找出正样本来消除采样偏差的方法
</p>
$$
\begin{aligned}
D_U^+ &= \{(n, n')\}^{(n, n') \in D_U} _ {\text{sign}(s_{\theta}(n, n') - t_s) = +1} \\
D^+ &= D_L^+ \cup D_U^+ \\
D^- &= D_U - D_U^+
\end{aligned}
$$
      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body,
      {
        delimiters: [
          {left: '$$', right: '$$', display:true},
          {left: '$', right: '$', display:false},
          {left: '\\(', right: '\\)', display: false},
          {left: '\\[', right: '\\]', display: true}
        ],
        throwOnError: false
      }
    );"></script>
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2026
     Zyed 
    ·
    
    技术支持 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
